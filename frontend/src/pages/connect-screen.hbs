{{!-- SPDX-FileCopyrightText: 2025 Magenta ApS <https://magenta.dk> --}}
{{!-- SPDX-License-Identifier: AGPL-3.0-only --}}
{{#> base/containers/html-container title="Screen Registration" script-src="/src/assets/pages/connect-screen/main.js" }}

    <!-- Background Video -->
    <video autoplay muted loop id="bg-video">
        <source src="https://www.magenta.dk/wp-content/uploads/2024/02/Baggrundsvideo.mp4" type="video/mp4" />
        {% trans "Your browser does not support the video tag." %}
    </video>

    <!-- Gradient Overlay -->
    <div id="video-overlay"></div>

    <!-- Content -->
    <div style="scale: 1.3" class="container">
        <div class="row justify-content-center">
            <div class="col-md-10 col-lg-8">
                <div class="card p-5">
                    <div class="card-body">
                        <h1 class="card-title text-center">{% trans "Screen Registration" %}</h1>
                        <br>
                        <div class="mb-3 text-center">
                            <span class="material-symbols-outlined" style="font-size:48px; color:#007bff">browser_updated</span>
                        </div>

                        <!-- Loading State -->
                        <div id="loading-state" class="text-center">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">{% trans "Loading..." %}</span>
                            </div>
                            <h4 class="mt-3">{% trans "Initializing screen registration..." %}</h4>
                        </div>

                        <!-- Registration State -->
                        <div id="registration-state" class="text-center" style="display: none;">
                            <h2 class="text-center">
                                {% trans "Screen ID:" %}
                                <strong id="screen-id">--</strong>
                            </h2>
                            <br>
                            <br>
                            <h4 class="text-center">
                                {% trans "Leave this page open. Your screen will automatically update once it is assigned to a group." %}
                            </h4>
                        </div>

                        <!-- Error State -->
                        <div id="error-state" class="text-center text-danger" style="display: none;">
                            <span class="material-symbols-outlined" style="font-size:48px; color:#dc3545">error</span>
                            <h4 id="error-message" class="mt-3">{% trans "An error occurred during registration." %}</h4>
                            <button class="btn btn-primary mt-3" onclick="location.reload()">{% trans "Retry" %}</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer with logos -->
    <div style="position: absolute; bottom: 0; right: 0; padding: 10px; display: flex; align-items: end; background-color: rgba(237,237,237,0.81); width: 100%; justify-content: space-between">
        <img src="https://www.magenta.dk/wp-content/uploads/2022/11/Magenta-logo.png" style="max-height: 4.5vh; position: relative; bottom: 5px" class="mx-5" />
        <img src="/openstream_logo_primary.svg" style="max-height: 6.5vh" class="mx-4 rounded" />
    </div>

{{/base/containers/html-container}}