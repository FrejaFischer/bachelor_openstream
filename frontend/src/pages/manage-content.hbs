{{!-- SPDX-FileCopyrightText: 2025 Magenta ApS <https://magenta.dk> --}}
{{!-- SPDX-License-Identifier: AGPL-3.0-only --}}
{{#> base/containers/html-container title="Manage Content" script-src="/src/assets/pages/manage-content/main.js" }}
    {{> base/navbar/navbar_branch }}
    {{#> base/containers/main-container }}

        {{#> base/containers/sidebar-and-content-container pageTitle="Manage Content" }}
            <!-- Sidebar -->
            {{#*inline "sidebarContent"}}
                <div class="pt-1 section-buttons">
                    <button class="btn btn-primary btn-sm" id="create-slideshow-button">
                        <span style="font-size: 1.3rem !important" class="material-symbols-outlined">add</span>
                        <span>{% trans "Add Content" %}</span>
                    </button>
                    <hr>
                </div>
                <div>
                    <span class="fw-bold fs-medium">{% trans "Filter by Categories" %}</span>
                    <div id="categoriesFilterContainer" class="my-2">
                    </div>
                    <hr>
                    <span class="fw-bold fs-medium">{% trans "Filter by Mode" %}</span>
                    <div id="modesFilterContainer" class="my-2">
                    </div>
                </div>
            {{/inline}}

            <!-- Main Content Area -->
            {{#*inline "mainContent"}}
                <div class="table-container p-3">
                    <div class="d-flex mb-3 py-2">
                        <!-- Create Slideshow Button -->
                        <!-- Search Field -->
                        <div class="position-relative w-100">
                            <i class="material-symbols-outlined search-icon text-darkest-gray">search</i>
                            <input type="text" id="searchInput" style="border-radius: 3.125rem" class="form-control ps-5 " placeholder="{% trans 'Search name, mode, category, aspect ratio, or tags...' %}" autocomplete="off">
                        </div>
                        <div class="form-check d-none align-items-center">
                            <input type="checkbox" class="form-check-input me-2" id="orderByMatching" role="button" checked>
                            <label for="orderByMatching" class="form-check-label" role="button">{% trans "Sort by relevancy on search"
                %}</label>
                        </div>
                    </div>
                    <div class="rounded table-scroll mb-2" style="box-shadow: rgba(72, 99, 115, 0.12) 1px 1px 10px 5px;
                        flex: 1;
                        overflow: auto">
                        <table style="border-radius: 0.75rem !important;
                              background: var(--white, #FFF);
                              --bs-table-striped-bg: #00000008" class="table table-striped" id="manage-content-table">
                            <thead>
                                <tr>
                                    <th id="th-name" class="sortable fs-medium semibold">
                                        {% trans "Name" %}<span class="material-symbols-outlined sort-indicator" id="sortIndicatorName"></span>
                                    </th>
                                    <th style="width: 10rem" id="th-mode" class="sortable fs-medium semibold">
                                        {% trans "Mode" %}<span class="material-symbols-outlined sort-indicator" id="sortIndicatorMode"></span>
                                    </th>
                                    <th style="width: 10rem" id="th-category" class="sortable fs-medium semibold">
                                        {% trans "Category" %}<span class="material-symbols-outlined sort-indicator" id="sortIndicatorCategory"></span>
                                    </th>
                                    <th style="width: 10rem" id="th-tags" class="sortable fs-medium semibold">
                                        {% trans "Tags" %}<span class="material-symbols-outlined sort-indicator" id="sortIndicatorTags"></span>
                                    </th>
                                    <th style="width: 8rem" id="th-aspect" class="sortable fs-medium semibold">
                                        {% trans "Aspect ratio" %}<span class="material-symbols-outlined sort-indicator" id="sortIndicatorAspect"></span>
                                    </th>
                                    <th class="fs-medium semibold" style="width: 18rem">{% trans "Actions" %}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dynamically generated by JS-->
                            </tbody>
                        </table>
                        <div id="emptyListAlert" class="alert alert-primary text-center mx-0 d-none fs-3" role="alert">{% trans "No slideshows found" %}</div>
                    </div>
                </div>
            {{/inline}}
        {{/base/containers/sidebar-and-content-container}}

        <!-- ## MODALS ## -->
        <!-- Rename Slideshow Modal -->
        {{> pages/manage-content/modals/rename-modal }}
        <!-- Category Modal -->
        {{> pages/manage-content/modals/category-modal }}
        <!-- Slideshow Created Modal -->
        {{> pages/manage-content/modals/slideshow-created-modal }}
        <!-- Create Slideshow Modal -->
        {{> pages/manage-content/modals/create-slideshow-modal }}
        <!-- Tags Modal -->
        {{> pages/manage-content/modals/tags-modal }}
        <!-- Delete Confirmation Modal -->
        {{> pages/manage-content/modals/delete-confirm-modal }}
    {{/base/containers/main-container}}
{{/base/containers/html-container}}